<!DOCTYPE html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta http-equiv="Content-Language" content="en">
    <meta name="google-site-verification" content="Aml4IkLX3Owh-C0d29uUJ7PbSDNUIVmh2SMQG7khDo8">
    <meta name="author" content="Eorus">
    <meta name="description" content="Today I&#39;m going to talk about how I added reply by email and mastodon comments to my Hugo site.">
    <meta name="keywords" content="blog, photography, design, alper, personal, orus, eorus, linux, wordpress, hugo, frontend">
    <meta name="robots" content="index, follow, archive">
    <title>
  Adding Mastodon Comments and Reply with Email to Hugo · Eorus
</title>



    
<meta property="og:image" content="http://localhost:1313/images/hugo.jpg" />
    

<meta property="og:url" content="http://localhost:1313/posts/2023/03/hugo-mastodon-email-comments/">
  <meta property="og:site_name" content="Eorus">
  <meta property="og:title" content="Adding Mastodon Comments and Reply with Email to Hugo">
  <meta property="og:description" content="Today I&#39;m going to talk about how I added reply by email and mastodon comments to my Hugo site.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-03-12T21:49:01+03:00">
    <meta property="article:modified_time" content="2023-03-12T21:49:01+03:00">
    <meta property="article:tag" content="Hugo">
    <meta property="article:tag" content="Blog">
    <meta property="article:tag" content="Website">


    <!--Favicon-->
    <link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" type="image/x-icon">
    <link rel="icon" href="http://localhost:1313/images/favicon.png" type="image/x-icon">

    
    <link href="/images/favicon.png" rel="icon">


  

<link rel="stylesheet" href="http://localhost:1313/style.min.167e6e327f8a251e87095a5741668284f94063a3e871e5b902da16fb008eea78.css">


    
    <link rel="canonical" href="http://localhost:1313/posts/2023/03/hugo-mastodon-email-comments/">
    

    <meta name="generator" content="Hugo 0.150.0">
</head>
<body class="posts hugo-mastodon-comments-email"><header id="header" class="navbar">
<div class="container grid-xl">
  <section class="navbar-section">
    <div class="wrap">
    <span class="decor"></span>
    <div class="nav-menu">
         
        <ul class="primary">
        
          
        <li class="nav-item">
        <a class="nav-link menu-item no-decoration " href="/">
          <i class='fa fa-home'></i>
          Home
        </a>
         </li>
          
        <li class="nav-item">
        <a class="nav-link menu-item no-decoration " href="/about/">
          <i class='fa fa-user'></i>
          About
        </a>
         </li>
          
        <li class="nav-item">
        <a class="nav-link menu-item no-decoration " href="/projects/">
          <i class='fa fa-folder-open'></i>
          Projects
        </a>
         </li>
          
        <li class="nav-item">
        <a class="nav-link menu-item no-decoration " href="/posts/">
          <i class='fa fa-newspaper'></i>
          Blog
        </a>
         </li>
          
        <li class="nav-item">
        <a class="nav-link menu-item no-decoration " href="/photos/">
          <i class='fa fa-camera'></i>
          Photos
        </a>
         </li>
          
        <li class="nav-item">
        <a class="nav-link menu-item no-decoration " href="/contact/">
          <i class='fa fa-envelope'></i>
          Contact
        </a>
         </li>
          
        
        
          
          
          
            
<a href="http://localhost:1313/tr/posts/2023/03/hugo-mastodon-email-comments/" class="btn btn-secondary btn-sm dilbtn" role="button">Türkçe</a>

            
          
        

    
        </ul>

    <a id="dark-mode" class="btn-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>

    </div>

  </section>

</div>
</header>
<div class="yan-taraf hide-sm">
				<span>I make things</span>
				<strong>simple</strong>
				<span class="line"></span>
			</div>
        <main id="main">
<section class="container page blog grid-xl">
  <div class="columns">
       <article class="column col-10 col-sm-12 col-mx-auto card">
  <div class="columns bg-secondary text-dark">
          <div class="column col-4 col-sm-12 card-image">
            
        <figure class="figure img-entry ">
           <div class="featured-media-inner section-inner medium">
            <img width="1024" height="768" src="http://localhost:1313/images/hugo.jpg"
              class="attachment-post-thumbnail size-post-thumbnail wp-post-image s-rounded d-block img-responsive" alt="Adding Mastodon Comments and Reply with Email to Hugo"
              sizes="(max-width: 1100px) 100vw, 1100px">
           </div>
         </figure>
          </div>
         

          <div class="column col-7 col-sm-12 card-header text-center m-2 p-2">
          <div class="breadcrumb card-subtitle text-tiny">


    
  
    
  
    
  

    <a href="http://localhost:1313/">Home</a> /
  

    <a href="http://localhost:1313/posts/">Posts</a> /
  

    Adding Mastodon Comments and Reply with Email to Hugo
  
</div>

          <div class="card-title h5"><h1 class="entry-title">Adding Mastodon Comments and Reply with Email to Hugo</h1></div>
          <div class="card-subtitle"><div class="entry-meta metadata">



<i class='fa fa-calendar'></i>
<time datetime="2023-03-12">12 March 2023</time> <span class="separator">•</span>

<i class='fa fa-user'></i> <a href="/">Eorus</a>  <span class="separator">•</span>
  <i class="fa fa-folder-open" aria-hidden="true"></i>
    <a href="/categories/open-source/">Open Source</a> <span class="separator">•</span>
<i class="fas fa-clock"></i>Reading Time : 4min
 </div>
</div>
          </div>
  </div>

          <div class="card-body entry-content">
            <p>If you ask what is one of the biggest disadvantages of static site builders, the first answer will probably be to add a comment section and form. There are various third-party solutions to fix this problem. For example, you can add an engine like Disqus for Hugo where you can manage comments, but this has the downside of including a tool with extra js and a bad privacy record on your website.</p>
<p>Since I want to follow both the zero js policy and the interaction in the comment section only via e-mail, I thought of making an addition where simple solutions will come to the fore. So I thought it would suffice to reply by e-mail, as well as placing the url of the article in the tooot link on the mastodon server I am involved in.</p>
<p>I think a better solution is to take advantage of Mastodon and the <a href="/en/posts/fediverse">Fediverse</a> platform and continue the possible discussion of the article there. Mastodon is a decentralized social network and allows people to communicate with each other without being on the same server.</p>
<p>Today I&rsquo;m going to talk about how I added <strong>&ldquo;reply by email&rdquo;</strong> and <strong>&ldquo;mastodon comments&rdquo;</strong> to my Hugo site.</p>
<p>If you scroll to the end of the post, you&rsquo;ll see a &ldquo;reply by email&rdquo; section and a &ldquo;toot&rdquo; link to comment on the mastodon.</p>
<h2 id="adding-mastodon-comments">Adding Mastodon Comments</h2>
<p>To keep things simple, I&rsquo;ve kept the mastodon comments section separate from the email response section. In order for the article you wrote for Mastodon comments to go to the relevant toot id, we need to add the mastodon server information, username and the resulting toot id of the article into the front matter. Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">+++</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">comments</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">host</span> = <span style="color:#e6db74">&#34;fosstodon.org&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">username</span> = <span style="color:#e6db74">&#34;eorus&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">id</span> = <span style="color:#ae81ff">109949459501850351</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">+++</span></span></span></code></pre></div>
<p>If you do not want to make this addition in every article and you create your articles as <code>hugo new /posts/blabla.md</code>, you can add them permanently in the default archetypes. Or if you want some of your articles to not have Mastodon interaction, you can remove the above code snippet and make sure that Mastodon Toot link is not created only at the end of that article. I haven&rsquo;t changed it permanently to keep it optional, so I just add this to the articles I&rsquo;m active and can share on <code>fosstodon.org</code> that I think is relevant. If I haven&rsquo;t added the Mastodon comments then it just shows up as an email reply. Naturally, there won&rsquo;t be a toot id yet at the time of writing your blog post. So you need to publish the article first and then toot about it on Mastodon. Then, it is necessary to add the toot id that appears in the comment section in the front-matter, along with other information, and republish the article. In other words, if it has already been shared on Mastodon and has the ID, it can be added to the front matter to be viewed at the end of the article.</p>
<p>Frankly, since I do not have a problem with displaying/loading Mastodon comments embedded in the site, I can say that it is sufficient for people who read the article to comment on the related toot on the Mastodon instance. For this, we create the <code>layouts/partials/comments.html</code> file in the templates of the theme with the following code snippet.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{ with .Params.comments }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;article-content&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h3</span>&gt;{{ i18n &#34;Comments&#34; . }}&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">p</span>&gt;{{ i18n &#34;comment_message&#34; . | safeHTML }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{ end }}</span></span></code></pre></div>
<p>If you have noticed here, the <code>with .Params.comments</code> at the beginning brings the information only when it sees the <code>#comments</code> details as the TOML parameter in the front matter. Since I write my articles in both Turkish and English, it reads the <code>comment_message</code> content for i18n/tr as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">comment_message</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">other</span> = <span style="color:#e6db74">&#39;You can use your Mastodon or Fediverse account to &lt;strong&gt;reply&lt;/strong&gt; to this &lt;strong&gt;&lt;a class=&#34;link&#34; href=&#34;https://{{ .host }}/@{{ .username }}/{{ .id }}&#34;&gt;toot!&lt;/a&gt;&lt;/strong&gt;.&#39;</span></span></span></code></pre></div>
<p>Finally, we add the theme&rsquo;s default templates (or whichever you use for <strong>posts</strong>) to bring partials/comments.html into <code>layouts/_default/single.html</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span> {{ <span style="color:#a6e22e">partial</span> <span style="color:#e6db74">&#34;comments.html&#34;</span> . }}</span></span></code></pre></div>
<h2 id="reply-via-email">Reply via Email</h2>
<p>For reply via e-mail, it will be sufficient to add the following just below the Mastodon comments in single.html.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">strong</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mailto:mail@example.com?cc=mail@example.com&amp;subject={{ .Title }}&#34;</span>&gt;Reply by Email ✉️ &lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">strong</span>&gt;</span></span></code></pre></div>
<p>That is all! If you want it to be more comprehensive, see <a href="https://amnesiak.org/post/2021/01/30/hugo-blog-with-mastodon-comments-extended/#wrapping-things-up">here</a>.</p>

          </div>
            


          <div class="entry-footer clearfix">
                <div class="float-left">
 <ul class="tags">
  <i class="fa fa-tags" aria-hidden="true"></i>
    <a href="/tags/hugo/">Hugo</a>
      <span class="separator">•</span>
    <a href="/tags/blog/">Blog</a>
      <span class="separator">•</span>
    <a href="/tags/website/">Website</a></ul>

                </div>
                 <div class="float-right share">

                   <a href="http://twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2023%2f03%2fhugo-mastodon-email-comments%2f" title="Share on Twitter"><i class="fab fa-twitter"></i></a>

                  <a href="http://www.facebook.com/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2f2023%2f03%2fhugo-mastodon-email-comments%2f" title="Share on Facebook"><i class="fab fa-facebook"></i></a>

                 </div>
          </div>

        </article>
      </div>
    </div>
        <ul class="col-11 column col-mx-auto pagination">
          <li class="page-item page-next text-center">
          <i class="fa fa-arrow-left"></i><a href="http://localhost:1313/posts/2023/03/archlinux-pacman-commands/">Archlinux Pacman Commands Guide</a>
          
          </li>
          <li class="page-item page-prev text-center">
          <a href="http://localhost:1313/posts/2023/03/comfort-zone-notifications/">Comfort Zone, Notifications and Small Appliances</a><i class="fa fa-arrow-right"></i>
        
          </li>
      </ul>

</section>


        </main>  <footer class="footer">
    <section class="container-fluid">
      <div class="row">
        <div class="col-md-12 text-center">
      
        <p>Fall in love with some activity, and do it! Nobody ever figures out what life is all about, and it doesn’t matter.</p>
      
        </div>
      </div>
      <p class="footer text-center"><a href="https://github.com/eorus" rel="me"><i class="fab fa-github"></i></a>
<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"> <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i><i class="fab fa-creative-commons-sa"></i> <span class="separator">•</span></a> 2025 Crafted with <i class="fa fa-heart" aria-hidden=true></i> • by Alper Orus  & Powered by <a href="https://gohugo.io/">Hugo</a></p>
        <div class="col-md-12 text-center">
      <ul class="nav">
      <li class="nav-item">
      <a href="https://xn--sr8hvo.ws/%F0%9F%99%83%E2%8F%AA%E2%9C%92%EF%B8%8F/previous">←</a>
      <a href="https://xn--sr8hvo.ws">IndieWeb Webring</a> 🕸💍
      <a href="https://xn--sr8hvo.ws/%F0%9F%99%83%E2%8F%AA%E2%9C%92%EF%B8%8F/next">→</a>
      </li>
      <li class="nav-item">
        <a href="https://fediring.net/previous?host=eorus.com">←</a>
        <a href="https://fediring.net/">Fediring</a>
        <a href="https://fediring.net/next?host=eorus.com">→</a>
      </li>
    </ul>
        </div>
    </section>

  </footer>

    
      
        
        <script src="/js/main.js"></script>
      
    
      
        
        <script src="/js/jquery.min.js"></script>
      

  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.4.0/jquery.fancybox.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    </body>
</html>
